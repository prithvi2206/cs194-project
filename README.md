#inturn.io

**Authors: Prithvi Ramakrishnan, Aditya Dev Gupta, Ricky Tran**

*Made for the CS194 Senior Project at Stanford in Winter 2015*

*inturn.io* is a web and mobile solution for college students to manage the various facets of their internship or job recruitment process through a centralized cloud-hosted platform. Centered around an efficient, easy-to-use dashboard, the product allows students to streamline the recruiting process for all their positions, providing tools for managing resumes, cover letters, contacts from networking events, job-related events, and interviews. Furthering its utility, the solution features integrations into various popular tools commonly used to help manage the job recruitment platform, such as Gmail and Google Calendar. 

### Installation
To save the project locally and install all relevant dependencies, run 
``` sh
$ git clone https://github.com/prithvi2206/cs194-project.git
$ cd cs194-project
$ sudo npm install
```

### Usage
To run the node.js server backend, run 
``` sh
$ node server.js
```
from the project home directory.

### Dependencies
The backend of our project is hosted on [Parse] 

<!---
Include some shit about those struggz we faced with using Parse for the backened with having additional node modules. 
-->

The program uses on the following APIs:
  - Google API (Calendar and Mail)
  - Feedzilla API for Dashboard News Feed
  - keep going

A list of the most heavily leveraged Node.js modules used by inturn.io is given below. A complete list can be found in `package.json`.
  - [passport], for google authentication with OAuth2.0.
  - [google-calendar], a minimal wrapper around Google's Calendar API, to form requests more easily.
  - [node-gmail-api], a wrapper around Google's Mail API, to handle batch requests more easily. 
  - keep going

### Data Model Structure and Backend Design

We created tables for *User*, *Application*, *Attachment*, *Contact*, *Document*, *Event*, and *Message*.

##### 1. User
User model. Stores personal information, along with google auth information.
```
objectId     : (String) unique user identifier generated by Parse
username     : (String) the email address corresponding to the Google 
               account the user signed up with.
password     : (String) a hash (hashed by Parse via bcrypt) of the 
               password set during onboarding.
firstName    : (String) set after Google Authentication
lastName     : (String) set after Google Authentication
googleId     : (String) unique ID allocated by Google for authentication
calId        : (String) ID of the "inturn" calendar that the software
               automatically creates upon account creation
googleToken  : (String) Google auth token
refreshToken : (String) refreshToken, used whenever Google needs to 
               refresh the authentication (usually every 15 mins)
passwordSet  : (Boolean) a simple flag to store the state of onboarding
```

##### 2. Application
The Application Model is the central model. Most other models have pointers to Applications as an attribute. It represents an application by a particular user to a particular job (title) at a particular company. For example, it represents the entity of Student A applying for a job as a Software Engineer at Google. 

```
objectId    : (String) unique identifier for the application 
userId      : (User*) Pointer to a User object, the user applying to the job
title       : (String) Title of the job applied to
company     : (String) Company applied to
deadline    : (Date) Deadline of the application (optional)
description : (String)
status      : (String) Possible values: "not_applied", "interview", "offer", 
              "no_offer"
url         : (String) URL of the company's website. (required, because this field
              powers several of the automated features in Messages and Calendar)
```
##### 3. Contact
Stores details associated with a particular contact. Contacts can be created in one of three ways:
  - The user manually adds a contact
  - The user imports mail, in which case Contacts will be created automatically for all emails imported when the sender's email address is from a mail domain equal to the url of some Application
  - The user imports contacts from the iOS application
  
```
objectId   : (String) unique identifier for the contact
name       : (String) name of the contact
appId      : (Application*) Application the contact is associated with (optional)
userId     : (User*) User this contact belongs to
title      : (String) Title of the contact at the company
company    : (String) Name of the company (equal to the company of the Application
             specified in appId, if appId is not null)
email      : (String)
phone      : (String)
flags      : (String) a set of flags, such as "from_iphone" and "from_email"
notes      : (String)
```
##### 4. Message
Messages are emails sent from Contacts to the email address corresponding to the Google account the user signed up with. Message objects are created whenever the `update_messages` function is called in `/cloud/util.mail.js` is called, which searches through the User's GMail inbox, and searches for all messages that are either from a contact in the Contacts data model or are from a sender whose email address has a domain that is a URL for some Application. A Message object is created for each of these messages found, by parsing the MIME message format and extracting the relevant sections.
```
objectId    : (String) unique identifier on Parse for the message
gmailId     : (String) unique identifier for the message allocated by GMail 
              (used for checking against adding duplicate messages)
userId      : (User*) User this message belongs to
contactId   : (Contact*) Contact of the sender
appId       : (Application) Application this message corresponds to (is null only 
              if it was imported from a contact that doesn't have an App assigned)
senderName  : (String)
senderEmail : (String)
dateSent    : (Date)
subject     : (String)
snippet     : (String) A text snippet (with whitespace removed) of the beginning 
              of the body
bodyText    : (String) Plaintext version of the body. Only used if the HTML 
              version cannot be used or does not exist for some reason 
bodyHTML    : (String) HTML formatted version of the body. Should be used by default.
flags       : (String) Flags provided by GMail. Only one currently being used is 
              the UNREAD flag, for formatting in the Messages view.
```
##### 5. Event
Events are created either by a user on Parse or are created automatically by going through the user's Google Calendar and importing any events that reference a company in an Application by name. 
```
objectId    : (String) unique identifier on Parse for the message
googleId    : (String) unique identifier for the event allocated by Google 
              (used for checking against adding duplicate events)
userId      : (User*) User this event belongs to
appId       : (Application*) Application this message corresponds to (this is 
              never null, because specifying an Application is required when 
              creating an event)
desc        : (String) Description/summary of the event
location    : (String)
start       : (Date) start date/time
end         : (Date) end date/time
```
##### 6. Document
Documents refer to either resumes or cover letters corresponding to a particular application or group of applications.
```
objectId    : (String) unique identifier for the document
userId      : (String) user the document belongs to
appIds      : (Application*[]) Array of Applications corresponding to the file
file        : (File) actual file contents, stored by Parse
name        : (String) filename
extension   : (String) eg. "pdf", "docx"
size        : (String) display-ready string representing size of file 
version     : (Number) version number, indexed at 1
```
##### 7. Attachment
Attachments from emails that were imported. Attachments themselves aren't stored, just all the information necessary to download them from Google on demand.
```
objectId    : (String) unique identifier on Parse for the message
messageId   : (String) unique identifier allocated by GMail for the message
attachmentId: (String) unique identifier allocated by GMail for the attachment. 
              This, along with messageId, is enough to make a request for the 
              attachment from Google, when requested by a user
userId      : (User*) User this attachment belongs to.
filename    : (String) Name of the file, to be displayed before being downloaded
```
### Codebase structure and Navigation




iOS
Native iOS application coded in swift to complement inturn's web application.
Features include:
  -viewing of job applications, messages, events, documents, and contacts
  -filter elements based on specified job application
  -creation of new events as well as exporting events from inturn to iOS calendar
  -creation of new contacts and the importing and exporting of contact to and from the iOS address book
  -documents previewer to preview uploaded documents on the go

File Structure:
-LoginViewController - controls basic login flow
-NavigationController - controls the navigation throughout the application
-Jobs
  -JobDetailTableViewController - zoomed in view of the details of a pending job application.
  enables navigation to to other items filtered by selected job application (events, contacts, documents, etc.)
  -JobsTableViewController - controls the selection of job application
  -JobTableViewCell - custom cell to display job 
-Events
  -JobEventSelectionTableViewController - controls the selection of application to link
  a new event with
  -NewEventTableViewController - form that handles the creation of a new event item
  -EventDetailTableViewController - zoomed in view of the details of an event. Also 
  provides the capability to save the event to your iOS calendar
  -EventTableViewCell - custom table cell to display event
  -EventsTableViewController - table that displays all events
-Messages
  -MessageDetailTableViewController - zoomed in view of the details of a message
  -MessagesTableViewController - table that displays all messages
  -MessageTableViewCell - custom table cell to display message on table
-Documents
  -DocumentViewController - UIWebview used to preview documents
  -DocumentsTableViewController - table that displays all documents
  -DocumentTableViewCell - custom table cell to display document item on table
-Contacts
  -JobSelectionTableViewController - controls the selection of an application to link
  to a specific contact
  -NewContactTableViewController - form that handles the creation of a new contact
  including importing from the iOS device
  -ContactsTableViewController - table that displays all contacts
  -ContactDetailTableViewController - zoomed in view of the details of a contact. also 
  given the option to save the current contact to your iOS device


### Known bugs

### Future work





[passport]:https://github.com/jaredhanson/passport-google-oauth
[google-calendar]:https://github.com/wanasit/google-calendar
[node-gmail-api]:https://github.com/SpiderStrategies/node-gmail-api
[Parse]:https://parse.com/
